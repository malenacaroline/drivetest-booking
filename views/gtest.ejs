<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <%- include ('partials/links.ejs') -%>
    <title>Book DriveTest - G Test</title>
  </head>
  <body class="bg-gray-custom">
    <%- include ('partials/header.ejs') -%>
    <main>
      <div class="container-fluid bg-light col-lg-4 py-4 g-container">
        <h2 class="text-center">G Test</h2>
        <form  method="get" action="/getdriver">
          <div class="mb-3">
            <label for="licenseNumber" class="form-label">License Number</label>
            <input
              type="text"
              class="form-control"
              id="licenseNumber"
              name="licenseNumber"
              placeholder="Enter your license number here..."
              required
            />
          </div>
          <div class="d-grid gap-2 col-6 mx-auto">
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>
        </form>
      </div>
      <%  if(locals.driver) {  %>
        <%  for(var i=0; i<driver.length ; i++) {  %>
          <div class="container-fluid bg-light col-lg-4 py-4 mt-5 mb-5">
            <h2 class="text-center">Driver Information</h2>
            <form  method="post" action="/update">
            <div class="mb-3">
              <label for="fName" class="form-label font-weight-bold"
                >First Name</label
              >
              <input type="text" class="form-control" id="fName" name="fName" value="<%= driver[i].firstName %>" readonly/>
            </div>
            <div class="mb-3">
              <label for="lName" class="form-label font-weight-bold"
                >Last Name</label
              >
              <input type="text" class="form-control" id="lName" name="lName" value="<%= driver[i].lastName %>" readonly/>
            </div>
            <div class="input-group mb-3">
              <span class="input-group-text"
                >License Number</span
              >
              <input type="text" class="form-control me-2" id="licenseNumber" name="licenseNumber" value="<%= driver[i].licenseNumber %>" readonly/>
              <span class="input-group-text">Age</span>
              <input type="text" class="form-control" id="age" name="age" value="<%= driver[i].age %>" readonly/>
            </div>
            <div class="mb-3">
              <label for="dob" class="form-label font-weight-bold">DOB</label>
              <input type="text" class="form-control" id="dob" name="dob" value="<%= driver[i].dob %>" readonly/>
            </div>
            <h5>Car Details</h5>
            <div class="input-group mb-3">
              <span class="input-group-text">IE Make</span>
              <input type="text" class="form-control me-2" id="iemake" name="iemake" value="<%= driver[i].iemake %>" />
              <span class="input-group-text" id="model">Model</span>
              <input type="text" class="form-control" id="model" name="model" value="<%= driver[i].model %>"/>
            </div>
            <div class="input-group mb-3">
              <span class="input-group-text">Year</span>
              <input type="text" class="form-control me-2" id="year" name="year" value="<%= driver[i].year %>"/>
              <span class="input-group-text">Plate Number</span>
              <input type="text" class="form-control" id="plate" name="plate"  value="<%= driver[i].plate %>"/>
            </div>
            <div class="d-grid gap-2 col-6 mx-auto">
              <button type="submit" class="btn btn-primary">Update</button>
            </div>
          </form>
        </div>
        <%   }    %>
      <%   } %>
      <%   if(locals.driver && Object.keys(driver).length === 0){ %>
        <h4 class="text-center text-white mt-4 fst-italic">Driver not found. Register driver on <a href="/g2test" class="text-white">G2 Test</a> page.</h4>
      <%   }    %>
    </main>
    <%- include ('partials/footer.ejs') -%>
    <%- include ('partials/scripts.ejs') -%>
  </body>
</html>
